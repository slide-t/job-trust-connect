<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>JobTrust Connect — Application</title>

 
  <style>
    :root{
      --bg:#0b0f12;
      --card:#111419;
      --muted:#9aa4ad;
      --accent:#4da6ff;
      --danger:#ff6b6b;
      --glass: rgba(255,255,255,0.03);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background:linear-gradient(180deg,#071018 0%, #07121a 100%);
      color:#e6eef6;
      -webkit-font-smoothing:antialiased;
      padding:28px 18px;
    }
    .wrap{
      max-width:980px;
      margin:0 auto;
      background:linear-gradient(180deg,var(--card), #0d1317);
      border-radius:12px;
      padding:22px;
      box-shadow:0 8px 30px rgba(2,6,23,0.6);
      border:1px solid rgba(255,255,255,0.02);
    }
    header h1{
      margin:0 0 6px;
      font-size:24px;
      color:var(--accent);
    }
    header p{margin:0 0 20px;color:var(--muted);font-size:13px}

    /* Progress bar */
    .progress{
      display:flex;
      gap:8px;
      margin-bottom:18px;
    }
    .step{
      flex:1;
      height:8px;
      background:rgba(255,255,255,0.06);
      border-radius:4px;
      overflow:hidden;
      position:relative;
    }
    .step .bar{height:100%; width:0%; background:linear-gradient(90deg,var(--accent), #2bb8ff); border-radius:4px; transition:width .35s ease;}

    form .section{display:none}
    form .section.active{display:block;animation:fade .35s ease}
    @keyframes fade{from{opacity:0; transform:translateY(6px)} to{opacity:1; transform:none}}

    label{display:block;font-size:13px;color:var(--muted); margin:10px 0 6px}
    input[type="text"], input[type="email"], input[type="tel"], input[type="date"],
    input[type="number"], select, textarea{
      background:var(--glass);
      border:1px solid rgba(255,255,255,0.03);
      color:#eaf4ff;
      padding:10px 12px;
      border-radius:8px;
      width:100%;
      font-size:16px;
      outline:none;
    }
    textarea{min-height:90px; resize:vertical}
    .row{display:flex;gap:12px}
    .col{flex:1}
    .small{width:140px}
    .photo-preview{width:96px;height:96px;border-radius:8px;overflow:hidden;border:1px solid rgba(255,255,255,0.04);background:#081018; display:flex;align-items:center;justify-content:center}
    .photo-preview img{width:100%;height:100%;object-fit:cover}

    .actions{display:flex;justify-content:space-between;align-items:center;margin-top:18px;gap:12px}
    .left-info{font-size:13px;color:var(--muted)}
    button.btn{
      background:linear-gradient(180deg,var(--accent),#2bb8ff);
      color:#031227;border:none;padding:10px 16px;border-radius:9px;font-weight:700;cursor:pointer;
      box-shadow:0 6px 18px rgba(77,166,255,0.12);
    }
    button.ghost{
      background:transparent;border:1px solid rgba(255,255,255,0.04);color:var(--muted);padding:10px 14px;border-radius:8px;cursor:pointer;
    }

    .error{color:var(--danger);font-size:13px;margin-top:6px;display:none}
    .note{font-size:13px;color:var(--muted);}

    /* Preview modal */
    .modal{
      position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.6);z-index:60;padding:20px;
    }
    .modal.open{display:flex}
    .card{
      width:100%;max-width:820px;background:#07131a;border-radius:10px;padding:18px;border:1px solid rgba(255,255,255,0.03);box-shadow:0 8px 30px rgba(0,0,0,0.6);
    }
    .preview-grid{display:grid;grid-template-columns:120px 1fr;gap:12px}
    .preview-row{margin-bottom:10px}
    .preview-row b{display:inline-block;width:160px;color:var(--muted)}
    .preview-photo{width:120px;height:120px;border-radius:10px;overflow:hidden;border:1px solid rgba(255,255,255,0.03);background:#07111a}
    .pre-buttons{display:flex;gap:12px;justify-content:flex-end;margin-top:12px}

    /* responsive */
    @media (max-width:720px){
      .row{flex-direction:column}
      .small{width:100%}
      .preview-grid{grid-template-columns:1fr;grid-auto-rows:auto}
      .preview-photo{width:100%;height:200px}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>JobTrust Connect — Interview Registration</h1>
      <p>Complete this registration. Education background is optional. You can preview and print before final submit.</p>
    </header>

    <div class="progress" aria-hidden>
      <div class="step"><div class="bar" id="bar0"></div></div>
      <div class="step"><div class="bar" id="bar1"></div></div>
      <div class="step"><div class="bar" id="bar2"></div></div>
      <div class="step"><div class="bar" id="bar3"></div></div>
      <div class="step"><div class="bar" id="bar4"></div></div>
      <div class="step"><div class="bar" id="bar5"></div></div>
      <div class="step"><div class="bar" id="bar6"></div></div>
    </div>

    <form id="appForm" novalidate>
      <!-- SECTION 0: Personal / Account -->
      <section class="section form-section active" data-step="0">
        <label>Full name *</label>
        <input name="fullName" id="fullName" type="text" required />
        <div class="error" id="err-fullName">Please enter full name.</div>

        <div class="row">
          <div class="col">
            <label>Email *</label>
            <input name="email" id="email" type="email" required />
            <div class="error" id="err-email">Please enter a valid email.</div>
          </div>
          <div class="col small">
            <label>Phone *</label>
            <input name="phone" id="phone" type="tel" required />
            <div class="error" id="err-phone">Please enter phone.</div>
          </div>
        </div>

        <label>Home Address *</label>
        <textarea name="address" id="address" required></textarea>
        <div class="error" id="err-address">Please enter address.</div>

        <div class="row" style="align-items:end;margin-top:6px">
          <div class="col">
            <label>Bank Name *</label>
            <select name="bank" id="bank" required>
              <option value="">Select Bank</option>
              <option>First Bank</option>
              <option>GTB</option>
              <option>FCMB</option>
              <option>Access Bank</option>
              <option>Polaris Bank</option>
              <option>Opay</option>
              <option>Palmpay</option>
            </select>
            <div class="error" id="err-bank">Select bank.</div>
          </div>

          <div class="col small">
            <label>Account Number *</label>
            <input name="accountNumber" id="accountNumber" type="text" inputmode="numeric" pattern="\d{10}" required placeholder="10 digits" />
            <div class="error" id="err-accountNumber">Enter a 10-digit account number.</div>
          </div>
        </div>

        <div class="actions">
          <div class="left-info note">Step 1 of 7</div>
          <div>
            <button type="button" class="ghost" id="saveDraftBtn">Save Draft</button>
            <button type="button" class="btn" id="nextBtn">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 1: Biodata -->
      <section class="section form-section" data-step="1">
        <label>Date of Birth *</label>
        <input name="dob" id="dob" type="date" required />
        <div class="error" id="err-dob">Please select DOB.</div>

        <div class="row">
          <div class="col small">
            <label>Age</label>
            <input id="age" name="age" type="number" readonly />
          </div>
          <div class="col">
            <label>Gender *</label>
            <select name="gender" id="gender" required>
              <option value="">Select</option><option>Male</option><option>Female</option><option>Other</option>
            </select>
            <div class="error" id="err-gender">Please select gender.</div>
          </div>
        </div>

        <label>Marital Status *</label>
        <select name="maritalStatus" id="maritalStatus" required>
          <option value="">Select</option><option>Single</option><option>Married</option><option>Divorced</option><option>Widowed</option>
        </select>
        <div class="error" id="err-maritalStatus">Please select marital status.</div>

        <div class="actions">
          <div class="left-info note">Step 2 of 7</div>
          <div>
            <button type="button" class="ghost" id="backBtn">← Back</button>
            <button type="button" class="btn" id="nextBtn2">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 2: Parents/Guardian -->
      <section class="section form-section" data-step="2">
        <label>Parent/Guardian Full Name *</label>
        <input name="parentName" id="parentName" type="text" required />
        <div class="error" id="err-parentName">Please enter parent/guardian name.</div>

        <div class="row">
          <div class="col">
            <label>Parent Phone *</label>
            <input name="parentPhone" id="parentPhone" type="tel" required />
            <div class="error" id="err-parentPhone">Enter parent phone.</div>
          </div>
          <div class="col">
            <label>Parent Relationship *</label>
            <input name="parentRelationship" id="parentRelationship" type="text" required />
            <div class="error" id="err-parentRelationship">Enter relationship.</div>
          </div>
        </div>

        <label>Parent Address *</label>
        <textarea name="parentAddress" id="parentAddress" required></textarea>
        <div class="error" id="err-parentAddress">Enter parent address.</div>

        <div class="actions">
          <div class="left-info note">Step 3 of 7</div>
          <div>
            <button type="button" class="ghost" id="backBtn2">← Back</button>
            <button type="button" class="btn" id="nextBtn3">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 3: Formal Workplace -->
      <section class="section form-section" data-step="3">
        <label>Previous Workplace Name *</label>
        <input name="prevWorkplace" id="prevWorkplace" type="text" required />
        <div class="error" id="err-prevWorkplace">Enter workplace name.</div>

        <label>Position/Role *</label>
        <input name="positionHeld" id="positionHeld" type="text" required />
        <div class="error" id="err-positionHeld">Enter position/role.</div>

        <div class="row">
          <div class="col small">
            <label>From *</label>
            <input name="workFrom" id="workFrom" type="date" required />
            <div class="error" id="err-workFrom">Select start date.</div>
          </div>
          <div class="col small">
            <label>To *</label>
            <input name="workTo" id="workTo" type="date" required />
            <div class="error" id="err-workTo">Select end date.</div>
          </div>
          <div class="col">
            <label>Contact Person at Workplace *</label>
            <input name="workContact" id="workContact" type="tel" required />
            <div class="error" id="err-workContact">Enter contact phone.</div>
          </div>
        </div>

        <label>Reason for Leaving (max 50 words) *</label>
        <textarea name="reasonLeaving" id="reasonLeaving" maxlength="300" required placeholder="Briefly state reason (approx 50 words)"></textarea>
        <div class="error" id="err-reasonLeaving">Provide a reason for leaving.</div>

        <div class="actions">
          <div class="left-info note">Step 4 of 7</div>
          <div>
            <button type="button" class="ghost" id="backBtn3">← Back</button>
            <button type="button" class="btn" id="nextBtn4">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 4: Guarantor -->
      <section class="section form-section" data-step="4">
        <label>Guarantor Full Name *</label>
        <input name="guarantorName" id="guarantorName" type="text" required />
        <div class="error" id="err-guarantorName">Enter guarantor name.</div>

        <label>Guarantor Phone *</label>
        <input name="guarantorPhone" id="guarantorPhone" type="tel" required />
        <div class="error" id="err-guarantorPhone">Enter guarantor phone.</div>

        <label>Guarantor Address *</label>
        <textarea name="guarantorAddress" id="guarantorAddress" required></textarea>
        <div class="error" id="err-guarantorAddress">Enter guarantor address.</div>

        <div class="actions">
          <div class="left-info note">Step 5 of 7</div>
          <div>
            <button type="button" class="ghost" id="backBtn4">← Back</button>
            <button type="button" class="btn" id="nextBtn5">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 5: Education Background (Optional) -->
      <section class="section form-section" data-step="5">
        <label>Highest Qualification (optional)</label>
        <input name="education" id="education" type="text" />
        <label>Institution (optional)</label>
        <input name="institution" id="institution" type="text" />
        <label>Graduation Year (optional)</label>
        <input name="gradYear" id="gradYear" type="number" min="1900" max="2100" />

        <div class="actions">
          <div class="left-info note">Step 6 of 7</div>
          <div>
            <button type="button" class="ghost" id="backBtn5">← Back</button>
            <button type="button" class="btn" id="nextBtn6">Next →</button>
          </div>
        </div>
      </section>

      <!-- SECTION 6: Photo / Preview step -->
      <section class="section form-section" data-step="6">
        <label>Upload Passport Photo *</label>
        <div class="row" style="align-items:center;">
          <div style="flex:1">
            <input name="photo" id="photo" type="file" accept="image/*" required />
            <div class="error" id="err-photo">Upload passport photo.</div>
            <div class="note" style="margin-top:6px">Best as a square &lt; 1MB for faster upload.</div>
          </div>
          <div style="width:110px">
            <div class="photo-preview" id="photoPreview"><span class="note">Preview</span></div>
          </div>
        </div>

        <div class="actions">
          <div class="left-info note">Step 7 of 7 (Preview & Submit)</div>
          <div>
            <button type="button" class="ghost" id="backBtn6">← Back</button>
            <button type="button" class="btn" id="previewBtn">Preview / Print</button>
          </div>
        </div>
      </section>
    </form>
  </div>

  <!-- Preview Modal -->
  <div class="modal" id="previewModal" aria-hidden>
    <div class="card" role="dialog" aria-modal="true" aria-label="Preview application">
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <strong style="color:var(--accent)">Application Preview</strong>
        <div>
          <button class="ghost" id="closePreview">Close</button>
          <button class="btn" id="printPdf">Print / Save PDF</button>
          <button class="btn" id="submitFinal" style="background:#2ed573">Submit</button>
        </div>
      </div>

      <div id="previewContent">
        <!-- dynamic preview -->
        <div style="display:flex;gap:12px;align-items:flex-start;margin-bottom:12px">
          <div class="preview-photo" id="previewPhoto"></div>
          <div style="flex:1">
            <div class="preview-row"><b>Full name:</b> <span id="pvFullName"></span></div>
            <div class="preview-row"><b>Email:</b> <span id="pvEmail"></span></div>
            <div class="preview-row"><b>Phone:</b> <span id="pvPhone"></span></div>
            <div class="preview-row"><b>Address:</b> <span id="pvAddress"></span></div>
            <div class="preview-row"><b>Bank / A/C:</b> <span id="pvBank"></span></div>
          </div>
        </div>

        <div class="preview-grid" id="pvMore">
          <!-- more rows -->
        </div>
      </div>

      <div class="pre-buttons" style="margin-top:14px">
        <small class="note">Preview first, then Print or Submit. After successful submission you'll be redirected.</small>
      </div>
    </div>
  </div>

  <script>
    /********** CONFIG **********/
    const SHEETDB_URL = 'https://sheetdb.io/api/v1/v7ewb4v3x7zwa'; // your SheetDB endpoint
    /*****************************/

    // simple utilities
    const qs = (sel, root=document) => root.querySelector(sel);
    const qsa = (sel, root=document) => Array.from(root.querySelectorAll(sel));

    // steps & progress
    const sections = qsa('.form-section');
    let step = 0;
    const total = sections.length;

    const bars = qsa('.bar');
    function updateProgress(i){
      bars.forEach((b, idx) => b.style.width = idx <= i ? ((idx < i)?'100%': (Math.round(((i - idx) / (1)) * 100) + '%')) : '0%');
    }
    updateProgress(0);

    // show step
    function showStep(n){
      sections.forEach((s, idx) => s.classList.toggle('active', idx === n));
      step = n;
      updateProgress(n);
      window.scrollTo({top:0, behavior:'smooth'});
    }

    // validation for a given section index
    function validateSection(idx){
      const sec = sections[idx];
      const requireds = qsa('input[required], select[required], textarea[required]', sec);
      let ok = true;
      requireds.forEach(el => {
        const err = el.closest('label')?.querySelector('.error') ?? sec.querySelector('#err-' + el.id);
        // fallback: find error element by next sibling with class 'error' (we placed some)
        const errorEl = err || el.nextElementSibling && el.nextElementSibling.classList.contains('error') ? el.nextElementSibling : null;
        if(!el.value || (el.type === 'file' && el.files.length === 0)){
          if(errorEl) errorEl.style.display='block';
          ok = false;
        } else {
          if(errorEl) errorEl.style.display='none';
        }
      });
      // extra checks (account number digits)
      if(idx === 0){
        const acct = qs('#accountNumber').value.trim();
        if(!/^\d{10}$/.test(acct)){
          qs('#err-accountNumber').style.display='block'; ok=false;
        } else qs('#err-accountNumber').style.display='none';
      }
      return ok;
    }

    // attach events to navigation
    qs('#nextBtn').addEventListener('click', ()=>{ if(validateSection(0)) showStep(1); });
    qs('#nextBtn2').addEventListener('click', ()=>{ if(validateSection(1)) showStep(2); });
    qs('#nextBtn3').addEventListener('click', ()=>{ if(validateSection(2)) showStep(3); });
    qs('#nextBtn4').addEventListener('click', ()=>{ if(validateSection(3)) showStep(4); });
    qs('#nextBtn5').addEventListener('click', ()=>{ if(validateSection(4)) showStep(5); });
    qs('#nextBtn6').addEventListener('click', ()=>{ /* education optional */ showStep(6); });

    qs('#backBtn').addEventListener('click', ()=> showStep(0));
    qs('#backBtn2').addEventListener('click', ()=> showStep(1));
    qs('#backBtn3').addEventListener('click', ()=> showStep(2));
    qs('#backBtn4').addEventListener('click', ()=> showStep(3));
    qs('#backBtn5').addEventListener('click', ()=> showStep(4));
    qs('#backBtn6').addEventListener('click', ()=> showStep(5));

    // Age calculation from DOB
    const dob = qs('#dob'), ageEl = qs('#age');
    dob?.addEventListener('change', ()=>{
      if(!dob.value) { ageEl.value=''; return; }
      const d = new Date(dob.value);
      if(isNaN(d)) return;
      const diff = Date.now() - d.getTime();
      const a = new Date(diff).getUTCFullYear() - 1970;
      ageEl.value = a;
      qs('#err-dob').style.display = a>=0 ? 'none' : 'block';
    });

    // photo preview & convert to dataURL
    let photoDataURL = '';
    qs('#photo').addEventListener('change', (e)=>{
      const f = e.target.files[0];
      if(!f) return;
      const reader = new FileReader();
      reader.onload = ()=> {
        photoDataURL = reader.result;
        qs('#photoPreview').innerHTML = '<img src="'+photoDataURL+'" alt="photo" style="width:100%;height:100%;object-fit:cover;border-radius:6px"/>';
        qs('#previewPhoto').innerHTML = '<img src="'+photoDataURL+'" alt="photo" style="width:100%;height:100%;object-fit:cover"/>';
        qs('#err-photo').style.display='none';
      };
      reader.readAsDataURL(f);
    });

    // Preview modal logic
    const modal = qs('#previewModal');
    const pv = {
      fullName: qs('#pvFullName'),
      email: qs('#pvEmail'),
      phone: qs('#pvPhone'),
      address: qs('#pvAddress'),
      bank: qs('#pvBank'),
      more: qs('#pvMore'),
      photo: qs('#previewPhoto')
    };

    qs('#previewBtn').addEventListener('click', ()=>{
      // validate final required section (photo)
      if(!validateSection(6)) { alert('Please upload passport photo.'); return; }
      // gather fields to preview
      pv.fullName.textContent = qs('#fullName').value;
      pv.email.textContent = qs('#email').value;
      pv.phone.textContent = qs('#phone').value;
      pv.address.textContent = qs('#address').value;
      pv.bank.textContent = qs('#bank').value + ' / ' + qs('#accountNumber').value;

      // build more details
      const rows = [];
      const push = (label, val) => rows.push(`<div class="preview-row"><b>${label}</b> <span>${val || '—'}</span></div>`);

      push('DOB', qs('#dob').value);
      push('Age', qs('#age').value);
      push('Gender', qs('#gender').value);
      push('Marital Status', qs('#maritalStatus').value);
      push('Parent', qs('#parentName').value + ' ('+qs('#parentRelationship').value+')');
      push('Parent Phone', qs('#parentPhone').value);
      push('Workplace', qs('#prevWorkplace').value);
      push('Position', qs('#positionHeld').value);
      push('Work From', qs('#workFrom').value + ' → ' + qs('#workTo').value);
      push('Work Contact', qs('#workContact').value);
      push('Reason for leaving', qs('#reasonLeaving').value);
      push('Guarantor', qs('#guarantorName').value + ' — ' + qs('#guarantorPhone').value);
      if(qs('#education').value || qs('#institution').value || qs('#gradYear').value){
        push('Education', (qs('#education').value || '') + ' @ ' + (qs('#institution').value || '') + ' (' + (qs('#gradYear').value || '') + ')');
      } else {
        push('Education', 'Not provided');
      }
      pv.more.innerHTML = rows.join('');
      // open modal
      modal.classList.add('open');
    });

    qs('#closePreview').addEventListener('click', ()=> modal.classList.remove('open') );

    // Print / PDF
    qs('#printPdf').addEventListener('click', async ()=>{
      // use html2canvas to capture previewContent
      const node = qs('#previewContent');
      try {
        const canvas = await html2canvas(node, {scale:2});
        const imgData = canvas.toDataURL('image/jpeg', 0.95);
        const { jsPDF } = window.jspdf;
        const pdf = new jsPDF('p','pt',[canvas.width, canvas.height]);
        pdf.addImage(imgData, 'JPEG', 0, 0, canvas.width, canvas.height);
        pdf.save('JobTrust_Application.pdf');
      } catch(err){
        alert('Could not generate PDF: ' + err.message);
      }
    });

    // Final submit to SheetDB
    qs('#submitFinal').addEventListener('click', async ()=>{
      // validate all required sections before submit
      for(let i=0;i<sections.length;i++){
        // skip education (index 5) optional
        if(i===5) continue;
        if(!validateSection(i)){ showStep(i); alert('Please complete required fields.'); return; }
      }
      // construct payload object (keys should match your sheet column names)
      const payload = {
        data: [{
          fullName: qs('#fullName').value.trim(),
          email: qs('#email').value.trim(),
          phone: qs('#phone').value.trim(),
          address: qs('#address').value.trim(),
          bank: qs('#bank').value,
          accountNumber: qs('#accountNumber').value.trim(),
          dob: qs('#dob').value,
          age: qs('#age').value,
          gender: qs('#gender').value,
          maritalStatus: qs('#maritalStatus').value,
          parentName: qs('#parentName').value,
          parentPhone: qs('#parentPhone').value,
          parentRelationship: qs('#parentRelationship').value,
          parentAddress: qs('#parentAddress').value,
          prevWorkplace: qs('#prevWorkplace').value,
          positionHeld: qs('#positionHeld').value,
          workFrom: qs('#workFrom').value,
          workTo: qs('#workTo').value,
          workContact: qs('#workContact').value,
          reasonLeaving: qs('#reasonLeaving').value,
          guarantorName: qs('#guarantorName').value,
          guarantorPhone: qs('#guarantorPhone').value,
          guarantorAddress: qs('#guarantorAddress').value,
          education: qs('#education').value,
          institution: qs('#institution').value,
          gradYear: qs('#gradYear').value,
          // include base64 photo string (optional if size ok)
          photoData: photoDataURL || ''
        }]
      };

      try {
        qs('#submitFinal').disabled = true;
        qs('#submitFinal').textContent = 'Submitting...';
        const res = await fetch(SHEETDB_URL, {
          method: 'POST',
          headers: {'Content-Type':'application/json'},
          body: JSON.stringify(payload)
        });
        if(!res.ok){
          const txt = await res.text();
          throw new Error('Server responded with '+res.status+': '+txt);
        }
        // success
        alert('Application submitted successfully. Redirecting...');
        // small delay for UX then redirect to index.html
        setTimeout(()=> location.href = 'index.html', 1200);
      } catch(err){
        alert('Submission error: ' + err.message);
        qs('#submitFinal').disabled = false;
        qs('#submitFinal').textContent = 'Submit';
      }
    });

    // Save draft (localStorage) - optional convenience
    qs('#saveDraftBtn').addEventListener('click', ()=>{
      const data = {};
      qsa('input,select,textarea').forEach(el=>{
        if(el.type==='file') return;
        data[el.id || el.name] = el.value;
      });
      localStorage.setItem('jobtrust_draft', JSON.stringify(data));
      alert('Draft saved locally in your browser.');
    });

    // load draft if exists
    (function loadDraft(){
      try{
        const raw = localStorage.getItem('jobtrust_draft');
        if(!raw) return;
        const data = JSON.parse(raw);
        Object.keys(data).forEach(k=>{
          const el = qs('#'+k) || qs('[name="'+k+'"]');
          if(el) el.value = data[k];
        });
      }catch(e){}
    })();

  </script>
   <!-- jsPDF & html2canvas (for PDF generation) -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNa5m7pM0q1+f6pDq5wq0p3kP2w6Zr2oQ2u2iN8s7O7HfYp0g3xXk2Wp8y+0qQZCV7xgkNQwEJkQY1z1+3qF2g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" integrity="sha512-EYq0b4Qxgk3vRgdv+V1mF1k6Xg9fK1G9lX+8p5gk6V6Ys4nEw7+YbXk6bK1G7c/yQn0h6Yb1JY5zv8uQ0w=="
    crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
document.getElementById("myForm").addEventListener("submit", function(e){
    e.preventDefault();

    fetch("https://sheetdb.io/api/v1/v7ewb4v3x7zwa", {
        method: "POST",
        body: new FormData(document.getElementById("myForm")),
    })
    .then(response => response.json())
    .then(data => {
        alert("Form submitted successfully!");
        window.location.href = "index.html"; // Redirect after success
    })
    .catch(error => {
        console.error("Error:", error);
        alert("There was a problem submitting the form.");
    });
});
</script>
</body>
</html>
